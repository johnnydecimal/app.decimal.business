---
import Slice from "./Slice.astro";

const today = new Date();
const month = String(today.getMonth() + 1).padStart(2, "0");
const day = String(today.getDate()).padStart(2, "0");
const year = today.getFullYear();
const date = `${year}-${month}-${day}`;
let environment = import.meta.env.DEV ? "dev" : "prod";

const pathname = Astro.url.pathname;
if (pathname.match(/^\/test/)) {
  environment = "test";
}
---

<footer class={import.meta.env.DEV ? "dev" : null}>
  <Slice id="footer">
    <div class="layout-grid-left-right">
      <div class="layout-left-item"></div>
      <div class="layout-right-item border-none">
        <p>
          <span class={`env-${environment}`}
            >Environment&nbsp;&nbsp;&nbsp;: {environment}</span
          >
          <br />
          <span>System status : normal</span><br />
          <span
            >Version&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: {
              environment !== "test" ? "1.0.0" : "x.y.z"
            }</span
          ><br />
          <span
            >Published&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: {
              environment !== "test" ? date : "yyyy-mm-dd"
            }</span
          >
        </p>
        &copy; {year} Johnny.Decimal
      </div>
    </div>
  </Slice>
</footer>

<style lang="scss">
  @use "@styles/common" as *;

  footer {
    font-size: 0.8rem;
    padding: var(--component-padding) 0;
    padding-bottom: calc(var(--component-padding) + 10px);
  }

  .env-dev {
    background-color: hotpink;
    color: white;
  }
  .env-test {
    background-color: lime;
  }
</style>
